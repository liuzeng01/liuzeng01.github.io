<!DOCTYPE html>
<html><head>

    <meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <link rel="canonical" href="https://liuzeng01.github.io/linux/kubernetes/deploy/k8sbuild/">

    <title>
        
        Kubernetes搭建 | iNote
        
    </title>

    
    <link href="https://liuzeng01.github.iocss/fontawesome.min.css" rel="stylesheet">

    
    <link rel="stylesheet" href="https://liuzeng01.github.io/css/ace.min.css">

    
    
        
    

</head>
<body><nav class="navbar navbar-expand-lg navbar-dark bg-primary shadow sticky-top" id="navbarMain">
    <div class="container">
        <div>
            <a class="navbar-brand" href="/">
                iNote
            </a>
        </div>
        
            <button class="navbar-toggler navbar-toggler-right collapsed" type="button" data-toggle="collapse" data-target="#navbarMainCollapse" aria-controls="navbarMainCollapse" aria-expanded="false" aria-label="Toggle navigation">
              <span class="navbar-toggler-icon"></span>
            </button>

            <div class="collapse navbar-collapse" id="navbarMainCollapse">
              <ul class="navbar-nav ml-auto">
                            <li class="nav-item">
                                <a class="nav-link" href="https://github.com/liuzeng01" target="_blank">
                                  More from us
                                </a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="https://github.com/liuzeng01/liuzeng01.github.io" target="_blank">
                                  <i class='fab fa-github'></i>
                                </a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="https://github.com/liuzeng01/liuzeng01.github.io/archive/master.zip" target="_blank">
                                  <button class='btn btn-success mt-n1'>Download</button>
                                </a>
                            </li>
              </ul>
            </div>
    </div>
</nav>
<div class="container-fluid">
            <div class="row">

                <div class="docs-sidenav order-0 col-12 col-md-3 col-lg-2 col-xl-2 position-sticky border-right"><nav class="navbar navbar-expand-md navbar-light pl-0">
    <button class="navbar-toggler navbar-toggler-right collapsed" type="button" data-toggle="collapse" data-target="#sidenav-left-collapse" aria-controls="sidenav-left-collapse" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

     <div class="collapse navbar-collapse align-items-start flex-column" id="sidenav-left-collapse">
            <form class="form-inline my-2 my-lg-0 searchbox">
                <input class="form-control mr-sm-2 w-100" data-search-input id="search-by" type="text" placeholder="Search">
            </form>
         <ul class="navbar-nav flex-column pt-3">
    <li data-nav-id="/linux/" class="nav-item my-1 parent haschildren
        ">
        
        <a class="nav-link p-0" href="/linux/"><h6>Linux</h6></a>
        <ul class="list-unstyled ml-2">
    <li data-nav-id="/linux/shell/" class="nav-item my-1 haschildren
        ">
        
        <a class="nav-link p-0" href="/linux/shell/"><h6>Shell</h6></a>
        <ul class="list-unstyled ml-2">
    <li data-nav-id="/linux/shell/shellexample/" class="nav-item my-1 haschildren
        ">
        
        <a class="nav-link p-0" href="/linux/shell/shellexample/"><h6>Shell 范例</h6></a>
        <ul class="list-unstyled ml-2">
        <li data-nav-id="/linux/shell/shellexample/basic/" class="nav-item my-1">
                
                 <a href="/linux/shell/shellexample/basic/" class="nav-link p-0">
                    Shell 范例 1 
                </a>
        </li>
        <li data-nav-id="/linux/shell/shellexample/grep/" class="nav-item my-1">
                
                 <a href="/linux/shell/shellexample/grep/" class="nav-link p-0">
                    grep/sed/awk
                </a>
        </li>
        </ul>
    </li>
        <li data-nav-id="/linux/shell/shellcase/" class="nav-item my-1">
                
                 <a href="/linux/shell/shellcase/" class="nav-link p-0">
                    Shell Case
                </a>
        </li>
        <li data-nav-id="/linux/shell/script/" class="nav-item my-1">
                
                 <a href="/linux/shell/script/" class="nav-link p-0">
                    Script命令
                </a>
        </li>
        <li data-nav-id="/linux/shell/supervisor/" class="nav-item my-1">
                
                 <a href="/linux/shell/supervisor/" class="nav-link p-0">
                    Supervisor
                </a>
        </li>
        <li data-nav-id="/linux/shell/vi/" class="nav-item my-1">
                
                 <a href="/linux/shell/vi/" class="nav-link p-0">
                    Vim快捷键
                </a>
        </li>
        </ul>
    </li>
    <li data-nav-id="/linux/redis/" class="nav-item my-1
        ">
        
        <a class="nav-link p-0" href="/linux/redis/"><h6>Redis</h6></a>
    </li>
    <li data-nav-id="/linux/docker/" class="nav-item my-1 haschildren
        ">
        
        <a class="nav-link p-0" href="/linux/docker/"><h6>Docker</h6></a>
        <ul class="list-unstyled ml-2">
    <li data-nav-id="/linux/docker/cmd/" class="nav-item my-1 haschildren
        ">
        
        <a class="nav-link p-0" href="/linux/docker/cmd/"><h6>docker命令</h6></a>
        <ul class="list-unstyled ml-2">
        <li data-nav-id="/linux/docker/cmd/harbor/" class="nav-item my-1">
                
                 <a href="/linux/docker/cmd/harbor/" class="nav-link p-0">
                    Harbor 部署
                </a>
        </li>
        <li data-nav-id="/linux/docker/cmd/aliyunrepo/" class="nav-item my-1">
                
                 <a href="/linux/docker/cmd/aliyunrepo/" class="nav-link p-0">
                    Aliyun Registry
                </a>
        </li>
        <li data-nav-id="/linux/docker/cmd/npm/" class="nav-item my-1">
                
                 <a href="/linux/docker/cmd/npm/" class="nav-link p-0">
                    vue &#43; docker
                </a>
        </li>
        </ul>
    </li>
    <li data-nav-id="/linux/docker/dockerfile/" class="nav-item my-1 haschildren
        ">
        
        <a class="nav-link p-0" href="/linux/docker/dockerfile/"><h6>dockerfile构建镜像</h6></a>
        <ul class="list-unstyled ml-2">
        <li data-nav-id="/linux/docker/dockerfile/command/" class="nav-item my-1">
                
                 <a href="/linux/docker/dockerfile/command/" class="nav-link p-0">
                    dockerfile基础命令
                </a>
        </li>
        <li data-nav-id="/linux/docker/dockerfile/godockerfile/" class="nav-item my-1">
                
                 <a href="/linux/docker/dockerfile/godockerfile/" class="nav-link p-0">
                    分阶段构建减小go镜像体积
                </a>
        </li>
        <li data-nav-id="/linux/docker/dockerfile/practice/" class="nav-item my-1">
                
                 <a href="/linux/docker/dockerfile/practice/" class="nav-link p-0">
                    Go项目分阶段构建实践
                </a>
        </li>
        <li data-nav-id="/linux/docker/dockerfile/tips/" class="nav-item my-1">
                
                 <a href="/linux/docker/dockerfile/tips/" class="nav-link p-0">
                    dockerfile使用注意事项
                </a>
        </li>
        </ul>
    </li>
        </ul>
    </li>
    <li data-nav-id="/linux/kernel/" class="nav-item my-1
        ">
        
        <a class="nav-link p-0" href="/linux/kernel/"><h6>Kernel</h6></a>
    </li>
    <li data-nav-id="/linux/openstack/" class="nav-item my-1
        ">
        
        <a class="nav-link p-0" href="/linux/openstack/"><h6>OpenStack</h6></a>
    </li>
    <li data-nav-id="/linux/kubernetes/" class="nav-item my-1 parent haschildren
        ">
        
        <a class="nav-link p-0" href="/linux/kubernetes/"><h6>Kubernetes</h6></a>
        <ul class="list-unstyled ml-2">
    <li data-nav-id="/linux/kubernetes/tips/" class="nav-item my-1 haschildren
        ">
        
        <a class="nav-link p-0" href="/linux/kubernetes/tips/"><h6>K8S使用技巧</h6></a>
        <ul class="list-unstyled ml-2">
        <li data-nav-id="/linux/kubernetes/tips/kubectl/" class="nav-item my-1">
                
                 <a href="/linux/kubernetes/tips/kubectl/" class="nav-link p-0">
                    kubectl命令用法
                </a>
        </li>
        <li data-nav-id="/linux/kubernetes/tips/kubeapi/" class="nav-item my-1">
                
                 <a href="/linux/kubernetes/tips/kubeapi/" class="nav-link p-0">
                    kubectl 使用技巧
                </a>
        </li>
        </ul>
    </li>
    <li data-nav-id="/linux/kubernetes/service/" class="nav-item my-1
        ">
        
        <a class="nav-link p-0" href="/linux/kubernetes/service/"><h6>K8S概念</h6></a>
    </li>
    <li data-nav-id="/linux/kubernetes/deploy/" class="nav-item my-1 parent haschildren
        ">
        
        <a class="nav-link p-0" href="/linux/kubernetes/deploy/"><h6>K8S环境配置记录</h6></a>
        <ul class="list-unstyled ml-2">
        <li data-nav-id="/linux/kubernetes/deploy/golang/" class="nav-item my-1">
                
                 <a href="/linux/kubernetes/deploy/golang/" class="nav-link p-0">
                    Golang of linux 
                </a>
        </li>
        <li data-nav-id="/linux/kubernetes/deploy/k8sbuild/" class="nav-item my-1 active">
                
                 <a href="/linux/kubernetes/deploy/k8sbuild/" class="nav-link p-0">
                    Kubernetes搭建
                </a>
        </li>
        <li data-nav-id="/linux/kubernetes/deploy/natip/" class="nav-item my-1">
                
                 <a href="/linux/kubernetes/deploy/natip/" class="nav-link p-0">
                    NAT网关配置虚拟机静态IP
                </a>
        </li>
        <li data-nav-id="/linux/kubernetes/deploy/glusterfs/" class="nav-item my-1">
                
                 <a href="/linux/kubernetes/deploy/glusterfs/" class="nav-link p-0">
                    GlusterFS
                </a>
        </li>
        <li data-nav-id="/linux/kubernetes/deploy/gitlab/" class="nav-item my-1">
                
                 <a href="/linux/kubernetes/deploy/gitlab/" class="nav-link p-0">
                    Gitlab&#43;kubernetes
                </a>
        </li>
        </ul>
    </li>
    <li data-nav-id="/linux/kubernetes/template/" class="nav-item my-1
        ">
        
        <a class="nav-link p-0" href="/linux/kubernetes/template/"><h6>K8S资源模板</h6></a>
    </li>
        </ul>
    </li>
        </ul>
    </li>
    <li data-nav-id="/essay/" class="nav-item my-1 haschildren
        ">
        
        <a class="nav-link p-0" href="/essay/"><h6>Essay</h6></a>
        <ul class="list-unstyled ml-2">
    <li data-nav-id="/essay/august/" class="nav-item my-1 haschildren
        ">
        
        <a class="nav-link p-0" href="/essay/august/"><h6>August</h6></a>
        <ul class="list-unstyled ml-2">
        <li data-nav-id="/essay/august/https/" class="nav-item my-1">
                
                 <a href="/essay/august/https/" class="nav-link p-0">
                    HTTPS
                </a>
        </li>
        <li data-nav-id="/essay/august/mysql/" class="nav-item my-1">
                
                 <a href="/essay/august/mysql/" class="nav-link p-0">
                    MySQL 30个基本问题
                </a>
        </li>
        </ul>
    </li>
    <li data-nav-id="/essay/july/" class="nav-item my-1 haschildren
        ">
        
        <a class="nav-link p-0" href="/essay/july/"><h6>July</h6></a>
        <ul class="list-unstyled ml-2">
        <li data-nav-id="/essay/july/hugo/" class="nav-item my-1">
                
                 <a href="/essay/july/hugo/" class="nav-link p-0">
                    hugo语法
                </a>
        </li>
        <li data-nav-id="/essay/july/net/" class="nav-item my-1">
                
                 <a href="/essay/july/net/" class="nav-link p-0">
                    网络相关
                </a>
        </li>
        <li data-nav-id="/essay/july/gin/" class="nav-item my-1">
                
                 <a href="/essay/july/gin/" class="nav-link p-0">
                    Gin
                </a>
        </li>
        <li data-nav-id="/essay/july/golang/" class="nav-item my-1">
                
                 <a href="/essay/july/golang/" class="nav-link p-0">
                    Golang面试题
                </a>
        </li>
        <li data-nav-id="/essay/july/powershell/" class="nav-item my-1">
                
                 <a href="/essay/july/powershell/" class="nav-link p-0">
                    Powershell
                </a>
        </li>
        <li data-nav-id="/essay/july/ssh/" class="nav-item my-1">
                
                 <a href="/essay/july/ssh/" class="nav-link p-0">
                    SSH免密登陆
                </a>
        </li>
        <li data-nav-id="/essay/july/toml/" class="nav-item my-1">
                
                 <a href="/essay/july/toml/" class="nav-link p-0">
                    toml
                </a>
        </li>
        </ul>
    </li>
        </ul>
    </li>
    <li data-nav-id="/booknote/" class="nav-item my-1 haschildren
        ">
        
        <a class="nav-link p-0" href="/booknote/"><h6>BookNote</h6></a>
        <ul class="list-unstyled ml-2">
    <li data-nav-id="/booknote/algorithm/" class="nav-item my-1 haschildren
        ">
        
        <a class="nav-link p-0" href="/booknote/algorithm/"><h6>algorithm</h6></a>
        <ul class="list-unstyled ml-2">
        <li data-nav-id="/booknote/algorithm/dynamic/" class="nav-item my-1">
                
                 <a href="/booknote/algorithm/dynamic/" class="nav-link p-0">
                    动态规划
                </a>
        </li>
        </ul>
    </li>
    <li data-nav-id="/booknote/sre/" class="nav-item my-1 haschildren
        ">
        
        <a class="nav-link p-0" href="/booknote/sre/"><h6>SRE</h6></a>
        <ul class="list-unstyled ml-2">
        <li data-nav-id="/booknote/sre/sre%E4%BB%8B%E7%BB%8D/" class="nav-item my-1">
                
                 <a href="/booknote/sre/sre%E4%BB%8B%E7%BB%8D/" class="nav-link p-0">
                    SRE介绍
                </a>
        </li>
        </ul>
    </li>
    <li data-nav-id="/booknote/designpattern/" class="nav-item my-1
        ">
        
        <a class="nav-link p-0" href="/booknote/designpattern/"><h6>Design Pattern</h6></a>
    </li>
        </ul>
    </li>
    <li data-nav-id="/programing/" class="nav-item my-1 haschildren
        ">
        
        <a class="nav-link p-0" href="/programing/"><h6>Programming</h6></a>
        <ul class="list-unstyled ml-2">
    <li data-nav-id="/programing/go/" class="nav-item my-1 haschildren
        ">
        
        <a class="nav-link p-0" href="/programing/go/"><h6>Go</h6></a>
        <ul class="list-unstyled ml-2">
    <li data-nav-id="/programing/go/github.com/" class="nav-item my-1 haschildren
        ">
        
        <a class="nav-link p-0" href="/programing/go/github.com/"><h6>Go语言第三方库</h6></a>
        <ul class="list-unstyled ml-2">
        <li data-nav-id="/programing/go/github.com/spf13/viper/" class="nav-item my-1">
                
                 <a href="/programing/go/github.com/spf13/viper/" class="nav-link p-0">
                    viper
                </a>
        </li>
        <li data-nav-id="/programing/go/github.com/x-mod/routine/" class="nav-item my-1">
                
                 <a href="/programing/go/github.com/x-mod/routine/" class="nav-link p-0">
                    routine
                </a>
        </li>
        <li data-nav-id="/programing/go/github.com/spf13/cobra/" class="nav-item my-1">
                
                 <a href="/programing/go/github.com/spf13/cobra/" class="nav-link p-0">
                    cobra
                </a>
        </li>
        <li data-nav-id="/programing/go/github.com/gohugoio/hugo/" class="nav-item my-1">
                
                 <a href="/programing/go/github.com/gohugoio/hugo/" class="nav-link p-0">
                    hugo
                </a>
        </li>
        <li data-nav-id="/programing/go/github.com/xujiajun/nutsdb/" class="nav-item my-1">
                
                 <a href="/programing/go/github.com/xujiajun/nutsdb/" class="nav-link p-0">
                    nutsdb
                </a>
        </li>
        <li data-nav-id="/programing/go/github.com/rivo/tview/" class="nav-item my-1">
                
                 <a href="/programing/go/github.com/rivo/tview/" class="nav-link p-0">
                    tview
                </a>
        </li>
        </ul>
    </li>
    <li data-nav-id="/programing/go/note/" class="nav-item my-1 haschildren
        ">
        
        <a class="nav-link p-0" href="/programing/go/note/"><h6>Note</h6></a>
        <ul class="list-unstyled ml-2">
    <li data-nav-id="/programing/go/note/july/" class="nav-item my-1 haschildren
        ">
        
        <a class="nav-link p-0" href="/programing/go/note/july/"><h6>July Note</h6></a>
        <ul class="list-unstyled ml-2">
        <li data-nav-id="/programing/go/note/july/json/" class="nav-item my-1">
                
                 <a href="/programing/go/note/july/json/" class="nav-link p-0">
                    Json 
                </a>
        </li>
        <li data-nav-id="/programing/go/note/july/sort/" class="nav-item my-1">
                
                 <a href="/programing/go/note/july/sort/" class="nav-link p-0">
                    Sort
                </a>
        </li>
        <li data-nav-id="/programing/go/note/july/ssh/" class="nav-item my-1">
                
                 <a href="/programing/go/note/july/ssh/" class="nav-link p-0">
                    SSH
                </a>
        </li>
        <li data-nav-id="/programing/go/note/july/%E6%96%87%E4%BB%B6%E6%93%8D%E4%BD%9C/" class="nav-item my-1">
                
                 <a href="/programing/go/note/july/%E6%96%87%E4%BB%B6%E6%93%8D%E4%BD%9C/" class="nav-link p-0">
                    文件操作
                </a>
        </li>
        <li data-nav-id="/programing/go/note/july/context/" class="nav-item my-1">
                
                 <a href="/programing/go/note/july/context/" class="nav-link p-0">
                    Context
                </a>
        </li>
        <li data-nav-id="/programing/go/note/july/grpc/" class="nav-item my-1">
                
                 <a href="/programing/go/note/july/grpc/" class="nav-link p-0">
                    gRPC
                </a>
        </li>
        <li data-nav-id="/programing/go/note/july/tag/" class="nav-item my-1">
                
                 <a href="/programing/go/note/july/tag/" class="nav-link p-0">
                    Tag
                </a>
        </li>
        <li data-nav-id="/programing/go/note/july/tran/" class="nav-item my-1">
                
                 <a href="/programing/go/note/july/tran/" class="nav-link p-0">
                    tran
                </a>
        </li>
        <li data-nav-id="/programing/go/note/july/scanner/" class="nav-item my-1">
                
                 <a href="/programing/go/note/july/scanner/" class="nav-link p-0">
                    循环读取输入
                </a>
        </li>
        <li data-nav-id="/programing/go/note/july/golang%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/" class="nav-item my-1">
                
                 <a href="/programing/go/note/july/golang%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/" class="nav-link p-0">
                    Go数据结构
                </a>
        </li>
        <li data-nav-id="/programing/go/note/july/sqlnodefine/" class="nav-item my-1">
                
                 <a href="/programing/go/note/july/sqlnodefine/" class="nav-link p-0">
                    Go语言查询不定字段
                </a>
        </li>
        <li data-nav-id="/programing/go/note/july/ip/" class="nav-item my-1">
                
                 <a href="/programing/go/note/july/ip/" class="nav-link p-0">
                    IP
                </a>
        </li>
        <li data-nav-id="/programing/go/note/july/mod/" class="nav-item my-1">
                
                 <a href="/programing/go/note/july/mod/" class="nav-link p-0">
                    mod
                </a>
        </li>
        </ul>
    </li>
    <li data-nav-id="/programing/go/note/august/" class="nav-item my-1 haschildren
        ">
        
        <a class="nav-link p-0" href="/programing/go/note/august/"><h6>August</h6></a>
        <ul class="list-unstyled ml-2">
        <li data-nav-id="/programing/go/note/august/got/" class="nav-item my-1">
                
                 <a href="/programing/go/note/august/got/" class="nav-link p-0">
                    Got下载工具
                </a>
        </li>
        <li data-nav-id="/programing/go/note/august/qrcode/" class="nav-item my-1">
                
                 <a href="/programing/go/note/august/qrcode/" class="nav-link p-0">
                    二维码生成
                </a>
        </li>
        <li data-nav-id="/programing/go/note/august/design/" class="nav-item my-1">
                
                 <a href="/programing/go/note/august/design/" class="nav-link p-0">
                    Go语言设计模式
                </a>
        </li>
        </ul>
    </li>
        </ul>
    </li>
    <li data-nav-id="/programing/go/gocookbook/" class="nav-item my-1 haschildren
        ">
        
        <a class="nav-link p-0" href="/programing/go/gocookbook/"><h6>Cook Book</h6></a>
        <ul class="list-unstyled ml-2">
    <li data-nav-id="/programing/go/gocookbook/string/" class="nav-item my-1
        ">
        
        <a class="nav-link p-0" href="/programing/go/gocookbook/string/"><h6>String of Go</h6></a>
    </li>
        </ul>
    </li>
        </ul>
    </li>
    <li data-nav-id="/programing/sql/" class="nav-item my-1
        ">
        
        <a class="nav-link p-0" href="/programing/sql/"><h6>SQL</h6></a>
    </li>
    <li data-nav-id="/programing/java/" class="nav-item my-1
        ">
        
        <a class="nav-link p-0" href="/programing/java/"><h6>Java</h6></a>
    </li>
    <li data-nav-id="/programing/c/" class="nav-item my-1 haschildren
        ">
        
        <a class="nav-link p-0" href="/programing/c/"><h6>C/C&#43;&#43;</h6></a>
        <ul class="list-unstyled ml-2">
        <li data-nav-id="/programing/c/makefile/" class="nav-item my-1">
                
                 <a href="/programing/c/makefile/" class="nav-link p-0">
                    Makefile
                </a>
        </li>
        </ul>
    </li>
    <li data-nav-id="/programing/python/" class="nav-item my-1
        ">
        
        <a class="nav-link p-0" href="/programing/python/"><h6>python</h6></a>
    </li>
    <li data-nav-id="/programing/javascript/" class="nav-item my-1 haschildren
        ">
        
        <a class="nav-link p-0" href="/programing/javascript/"><h6>JavaScript</h6></a>
        <ul class="list-unstyled ml-2">
    <li data-nav-id="/programing/javascript/august/" class="nav-item my-1 haschildren
        ">
        
        <a class="nav-link p-0" href="/programing/javascript/august/"><h6>August</h6></a>
        <ul class="list-unstyled ml-2">
        <li data-nav-id="/programing/javascript/august/nodejs/" class="nav-item my-1">
                
                 <a href="/programing/javascript/august/nodejs/" class="nav-link p-0">
                    Node JS
                </a>
        </li>
        </ul>
    </li>
        </ul>
    </li>
    <li data-nav-id="/programing/flutter/" class="nav-item my-1
        ">
        
        <a class="nav-link p-0" href="/programing/flutter/"><h6>Flutter</h6></a>
    </li>
        </ul>
    </li>
    <li data-nav-id="/zsmart/" class="nav-item my-1 haschildren
        ">
        
        <a class="nav-link p-0" href="/zsmart/"><h6>ZSmart</h6></a>
        <ul class="list-unstyled ml-2">
    <li data-nav-id="/zsmart/charging/" class="nav-item my-1 haschildren
        ">
        
        <a class="nav-link p-0" href="/zsmart/charging/"><h6>Charging</h6></a>
        <ul class="list-unstyled ml-2">
    <li data-nav-id="/zsmart/charging/chargingcode/" class="nav-item my-1
        ">
        
        <a class="nav-link p-0" href="/zsmart/charging/chargingcode/"><h6>Charging Code </h6></a>
    </li>
    <li data-nav-id="/zsmart/charging/testcase/" class="nav-item my-1
        ">
        
        <a class="nav-link p-0" href="/zsmart/charging/testcase/"><h6>Charging Test Case</h6></a>
    </li>
        </ul>
    </li>
    <li data-nav-id="/zsmart/pcrf/" class="nav-item my-1 haschildren
        ">
        
        <a class="nav-link p-0" href="/zsmart/pcrf/"><h6>PCRF</h6></a>
        <ul class="list-unstyled ml-2">
    <li data-nav-id="/zsmart/pcrf/corenet/" class="nav-item my-1 haschildren
        ">
        
        <a class="nav-link p-0" href="/zsmart/pcrf/corenet/"><h6>Core Net</h6></a>
        <ul class="list-unstyled ml-2">
        <li data-nav-id="/zsmart/pcrf/corenet/net/" class="nav-item my-1">
                
                 <a href="/zsmart/pcrf/corenet/net/" class="nav-link p-0">
                    Core net structrue
                </a>
        </li>
        </ul>
    </li>
    <li data-nav-id="/zsmart/pcrf/structrue/" class="nav-item my-1 haschildren
        ">
        
        <a class="nav-link p-0" href="/zsmart/pcrf/structrue/"><h6>PCRF Structrue</h6></a>
        <ul class="list-unstyled ml-2">
        <li data-nav-id="/zsmart/pcrf/structrue/application/" class="nav-item my-1">
                
                 <a href="/zsmart/pcrf/structrue/application/" class="nav-link p-0">
                    PCRF Application 
                </a>
        </li>
        <li data-nav-id="/zsmart/pcrf/structrue/process/" class="nav-item my-1">
                
                 <a href="/zsmart/pcrf/structrue/process/" class="nav-link p-0">
                    PCRF Backend Process
                </a>
        </li>
        </ul>
    </li>
    <li data-nav-id="/zsmart/pcrf/testcase/" class="nav-item my-1 haschildren
        ">
        
        <a class="nav-link p-0" href="/zsmart/pcrf/testcase/"><h6>Test Case</h6></a>
        <ul class="list-unstyled ml-2">
        <li data-nav-id="/zsmart/pcrf/testcase/basic/" class="nav-item my-1">
                
                 <a href="/zsmart/pcrf/testcase/basic/" class="nav-link p-0">
                    Basic Gx Case
                </a>
        </li>
        <li data-nav-id="/zsmart/pcrf/testcase/rxbasic/" class="nav-item my-1">
                
                 <a href="/zsmart/pcrf/testcase/rxbasic/" class="nav-link p-0">
                    RX流程调测
                </a>
        </li>
        </ul>
    </li>
    <li data-nav-id="/zsmart/pcrf/pcrfcode/" class="nav-item my-1
        ">
        
        <a class="nav-link p-0" href="/zsmart/pcrf/pcrfcode/"><h6>PCRF Code</h6></a>
    </li>
        </ul>
    </li>
        </ul>
    </li>
        </ul>
    </div>
</nav>


</div>
                <div class="docs-toc large order-lg-2 order-md-0 order-xs-1 col-12 col-lg-2 col-xl-2 position-sticky border-left"><div class="docs-toc">
	<nav id="TableOfContents">
  <ul>
    <li><a href="#1-虚拟机部署">1. 虚拟机部署</a>
      <ul>
        <li><a href="#从centos的镜像开始生成网络模式选择nat">从centos的镜像开始生成，网络模式选择NAT</a></li>
        <li><a href="#配置静态ip">配置静态IP</a></li>
        <li><a href="#设置主机名hostname管理节点设置主机名为-master-">设置主机名hostname，管理节点设置主机名为 master 。</a></li>
        <li><a href="#编辑-etchosts-文件添加域名解析">编辑 /etc/hosts 文件，添加域名解析</a></li>
        <li><a href="#关闭防火墙selinux和swap">关闭防火墙、selinux和swap。</a></li>
        <li><a href="#配置内核参数将桥接的ipv4流量传递到iptables的链">配置内核参数，将桥接的IPv4流量传递到iptables的链</a></li>
        <li><a href="#配置国内yum源">配置国内yum源</a></li>
        <li><a href="#配置国内kubernetes源">配置国内Kubernetes源</a></li>
        <li><a href="#配置-docker-源">配置 docker 源</a></li>
      </ul>
    </li>
    <li><a href="#2-安装">2. 安装</a>
      <ul>
        <li><a href="#安装docker">安装docker</a></li>
        <li><a href="#安装kubeadmkubeletkubectl">安装kubeadm、kubelet、kubectl</a></li>
      </ul>
    </li>
    <li><a href="#3-配置master节点">3. 配置Master节点</a>
      <ul>
        <li><a href="#在master进行kubernetes集群初始化">在master进行Kubernetes集群初始化</a></li>
        <li><a href="#记录生成的最后部分内容">记录生成的最后部分内容</a></li>
        <li><a href="#配置kubectl工具">配置kubectl工具</a></li>
        <li><a href="#部署flannel网络">部署flannel网络</a></li>
        <li><a href="#查看kubelet的状态如果发现有这种报错则需要修改下配置">查看Kubelet的状态，如果发现有这种报错，则需要修改下配置</a></li>
        <li><a href="#使master节点也成为node节点">使master节点也成为node节点</a></li>
      </ul>
    </li>
    <li><a href="#4-部署node节点">4. 部署node节点</a>
      <ul>
        <li><a href="#在所有node节点上进行如下操作"><strong>在所有node节点上进行如下操作</strong></a></li>
        <li><a href="#在master节点输入命令检查集群状态">在master节点输入命令检查集群状态</a></li>
      </ul>
    </li>
    <li><a href="#5-部署dashboard">5. 部署dashboard</a>
      <ul>
        <li><a href="#创建dashboard的yaml文件">创建Dashboard的yaml文件</a></li>
        <li><a href="#部署dashboard">部署Dashboard</a></li>
        <li><a href="#创建完成后检查相关服务运行状态">创建完成后，检查相关服务运行状态</a></li>
        <li><a href="#查看访问dashboard的认证令牌">查看访问Dashboard的认证令牌</a></li>
        <li><a href="#使用输出的token登录dashboard">使用输出的token登录Dashboard</a></li>
        <li><a href="#获取dashboard管理员角色token">获取dashboard管理员角色token</a></li>
      </ul>
    </li>
  </ul>
</nav>
</div>
</div>
                <div class="main col-12 order-1 col-md-9 col-lg-10 col-xl-8 py-3">
                

<h1>Kubernetes搭建</h1>

<hr>


<div class="card my-3 border-top-0 border-right-0 border-bottom-0 border-left border-primary rounded" style="border-width:4px !important;">
    <div class="wrap border border-left-0 rounded">
        
        <div class="card-header border-0 bg-white pl-3 text-primary">
            <h3>K8s</h3>
        </div>
        
        <div class="card-body pt-1">
            Kubernetes作为容器编排工具，简化容器管理，提升工作效率而颇受青睐。很多新手部署Kubernetes由于“科学上网”问题举步维艰，本文以实战经验详解kubeadm不用“科学上网”部署Kubernetes的最简方法。
        </div>
    </div>
</div>

<p>Kubernetes（简称K8S）是开源的容器集群管理系统，可以实现容器集群的自动化部署、自动扩缩容、维护等功能。它既是一款容器编排工具，也是全新的基于容器技术的分布式架构领先方案。在Docker技术的基础上，为容器化的应用提供部署运行、资源调度、服务发现和动态伸缩等功能，提高了大规模容器集群管理的便捷性。</p>
<p>K8S集群中有管理节点与工作节点两种类型。管理节点主要负责K8S集群管理，集群中各节点间的信息交互、任务调度，还负责容器、Pod、NameSpaces、PV等生命周期的管理。工作节点主要为容器和Pod提供计算资源，Pod及容器全部运行在工作节点上，工作节点通过kubelet服务与管理节点通信以管理容器的生命周期，并与集群其他节点进行通信。</p>
<h2 id="1-虚拟机部署">1. 虚拟机部署</h2>
<h3 id="从centos的镜像开始生成网络模式选择nat">从centos的镜像开始生成，网络模式选择NAT</h3>
<pre><code>NAT模式子网地址192.168.24.1，子网掩码 255.255.255.0 ，网关地址 192.168.24.2 ，子网区段 192.168.24.3-192.168.24.254
</code></pre>
<h3 id="配置静态ip">配置静态IP</h3>
<pre><code>192.168.24.131
192.168.24.132
192.168.24.133
</code></pre>
<h3 id="设置主机名hostname管理节点设置主机名为-master-">设置主机名hostname，管理节点设置主机名为 master 。</h3>
<div class="highlight"><pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">hostnamectl set-hostname master
<span style="color:#75715e"># 需要设置其他主机名称时，可将 master 替换为正确的主机名node1、node2即可。</span>
</code></pre></div><h3 id="编辑-etchosts-文件添加域名解析">编辑 /etc/hosts 文件，添加域名解析</h3>
<div class="highlight"><pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">cat <span style="color:#d88200">&lt;&lt;EOF &gt;&gt;/etc/hosts
</span><span style="color:#d88200">
</span><span style="color:#d88200">10.10.10.10 master
</span><span style="color:#d88200">
</span><span style="color:#d88200">10.10.10.11 node1
</span><span style="color:#d88200">
</span><span style="color:#d88200">10.10.10.12 node2
</span><span style="color:#d88200">
</span><span style="color:#d88200">EOF</span>
</code></pre></div><h3 id="关闭防火墙selinux和swap">关闭防火墙、selinux和swap。</h3>
<div class="highlight"><pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">systemctl stop firewalld

systemctl disable firewalld

setenforce <span style="color:#ae81ff">0</span>

sed -i <span style="color:#d88200">&#34;s/^SELINUX=enforcing/SELINUX=disabled/g&#34;</span> /etc/selinux/config

swapoff -a

sed -i <span style="color:#d88200">&#39;s/.*swap.*/#&amp;/&#39;</span> /etc/fstab
</code></pre></div><h3 id="配置内核参数将桥接的ipv4流量传递到iptables的链">配置内核参数，将桥接的IPv4流量传递到iptables的链</h3>
<div class="highlight"><pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">cat &gt; /etc/sysctl.d/k8s.conf <span style="color:#d88200">&lt;&lt;EOF
</span><span style="color:#d88200">
</span><span style="color:#d88200">net.bridge.bridge-nf-call-ip6tables = 1
</span><span style="color:#d88200">
</span><span style="color:#d88200">net.bridge.bridge-nf-call-iptables = 1
</span><span style="color:#d88200">
</span><span style="color:#d88200">EOF</span>

sysctl --system
</code></pre></div><h3 id="配置国内yum源">配置国内yum源</h3>
<div class="highlight"><pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">yum install -y wget

mkdir /etc/yum.repos.d/bak <span style="color:#f92672">&amp;&amp;</span> mv /etc/yum.repos.d/*.repo /etc/yum.repos.d/bak

wget -O /etc/yum.repos.d/CentOS-Base.repo http://mirrors.cloud.tencent.com/repo/centos7_base.repo

wget -O /etc/yum.repos.d/epel.repo http://mirrors.cloud.tencent.com/repo/epel-7.repo

yum clean all <span style="color:#f92672">&amp;&amp;</span> yum makecache
</code></pre></div><h3 id="配置国内kubernetes源">配置国内Kubernetes源</h3>
<div class="highlight"><pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">cat <span style="color:#d88200">&lt;&lt;EOF &gt; /etc/yum.repos.d/kubernetes.repo
</span><span style="color:#d88200">
</span><span style="color:#d88200">[kubernetes]
</span><span style="color:#d88200">
</span><span style="color:#d88200">name=Kubernetes
</span><span style="color:#d88200">
</span><span style="color:#d88200">baseurl=https://mirrors.aliyun.com/kubernetes/yum/repos/kubernetes-el7-x86_64/
</span><span style="color:#d88200">
</span><span style="color:#d88200">enabled=1
</span><span style="color:#d88200">
</span><span style="color:#d88200">gpgcheck=1
</span><span style="color:#d88200">
</span><span style="color:#d88200">repo_gpgcheck=1
</span><span style="color:#d88200">
</span><span style="color:#d88200">gpgkey=https://mirrors.aliyun.com/kubernetes/yum/doc/yum-key.gpg https://mirrors.aliyun.com/kubernetes/yum/doc/rpm-package-key.gpg
</span><span style="color:#d88200">
</span><span style="color:#d88200">EOF</span>
</code></pre></div><h3 id="配置-docker-源">配置 docker 源</h3>
<div class="highlight"><pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">wget https://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo -O /etc/yum.repos.d/docker-ce.repo
</code></pre></div><h2 id="2-安装">2. 安装</h2>
<h3 id="安装docker">安装docker</h3>
<div class="highlight"><pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">yum install -y docker-ce-18.06.1.ce-3.el7

systemctl <span style="color:#111">enable</span> docker <span style="color:#f92672">&amp;&amp;</span> systemctl start docker

docker -v
</code></pre></div><h3 id="安装kubeadmkubeletkubectl">安装kubeadm、kubelet、kubectl</h3>
<div class="highlight"><pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">yum install -y kubelet-1.14.2 kubeadm-1.14.2 kubectl-1.14.2 kubernetes-cni-0.7.5-0.x86_64

systemctl <span style="color:#111">enable</span> kubelet
</code></pre></div><p><strong>Kubelet负责与其他节点集群通信，并进行本节点Pod和容器生命周期的管理。Kubeadm是Kubernetes的自动化部署工具，降低了部署难度，提高效率。Kubectl是Kubernetes集群管理工具。</strong></p>
<h2 id="3-配置master节点">3. 配置Master节点</h2>
<h3 id="在master进行kubernetes集群初始化">在master进行Kubernetes集群初始化</h3>
<div class="highlight"><pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">kubeadm init --kubernetes-version<span style="color:#f92672">=</span>1.14.2 <span style="color:#8045ff">\
</span><span style="color:#8045ff"></span>--apiserver-advertise-address<span style="color:#f92672">=</span>192.168.24.131 <span style="color:#8045ff">\
</span><span style="color:#8045ff"></span>--image-repository registry.aliyuncs.com/google_containers <span style="color:#8045ff">\
</span><span style="color:#8045ff"></span>--service-cidr<span style="color:#f92672">=</span>10.1.0.0/16 <span style="color:#8045ff">\
</span><span style="color:#8045ff"></span>--pod-network-cidr<span style="color:#f92672">=</span>10.244.0.0/16
</code></pre></div><h3 id="记录生成的最后部分内容">记录生成的最后部分内容</h3>
<div class="highlight"><pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">kubeadm join 192.168.24.131:6443 --token vs6pdy.2t9kvhq4babs2gu8 <span style="color:#8045ff">\
</span><span style="color:#8045ff"></span>    --discovery-token-ca-cert-hash sha256:60e5986910f6d76166b747fbe2ed061c9b638aca33392807590abfd6bf818f02
</code></pre></div><h3 id="配置kubectl工具">配置kubectl工具</h3>
<div class="highlight"><pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">mkdir -p /root/.kube

cp /etc/kubernetes/admin.conf /root/.kube/config

kubectl get nodes

kubectl get cs
</code></pre></div><h3 id="部署flannel网络">部署flannel网络</h3>
<div class="highlight"><pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">kubectl apply -f https://raw.githubusercontent.com/coreos/flannel/a70459be0084506e4ec919aa1c114638878db11b/Documentation/kube-flannel.yml
</code></pre></div><h3 id="查看kubelet的状态如果发现有这种报错则需要修改下配置">查看Kubelet的状态，如果发现有这种报错，则需要修改下配置</h3>
<pre><code>Jul 27 00:30:36 k8s-node1 kubelet[2843]: E0727 00:30:36.322259    2843 kubelet.go:2170] Container runtime network not ready: NetworkReady=false reason:NetworkPl...initialized
Jul 27 00:30:41 k8s-node1 kubelet[2843]: I0727 00:30:41.080124    2843 transport.go:132] certificate rotation detected, shutting down client connections to star...credentials
Jul 27 00:30:41 k8s-node1 kubelet[2843]: W0727 00:30:41.133004    2843 cni.go:213] Unable to update cni config: No networks found in /etc/cni/net.d
Jul 27 00:30:41 k8s-node1 kubelet[2843]: E0727 00:30:41.323559    2843 kubelet.go:2170] Container runtime network not ready: NetworkReady=false reason:NetworkPl...initialized
....
</code></pre><div class="highlight"><pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">vi /usr/lib/systemd/system/kubelet.service.d/10-kubeadm.conf
<span style="color:#75715e">### 在文件中添加</span>
<span style="color:#111">Environment</span><span style="color:#f92672">=</span><span style="color:#d88200">&#34;KUBELET_NETWORK_ARGS=--network-plugin=cni --cni-conf-dir=/etc/cni/ --cni-bin-dir=/opt/cni/bin&#34;</span>

<span style="color:#75715e">### 然后重启kubelet</span>
</code></pre></div><h3 id="使master节点也成为node节点">使master节点也成为node节点</h3>
<pre><code>kubectl taint nodes --all node-role.kubernetes.io/master
</code></pre><h2 id="4-部署node节点">4. 部署node节点</h2>
<h3 id="在所有node节点上进行如下操作"><strong>在所有node节点上进行如下操作</strong></h3>
<div class="highlight"><pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">kubeadm join 192.168.24.131:6443 --token vs6pdy.2t9kvhq4babs2gu8 <span style="color:#8045ff">\
</span><span style="color:#8045ff"></span>    --discovery-token-ca-cert-hash sha256:60e5986910f6d76166b747fbe2ed061c9b638aca33392807590abfd6bf818f02
</code></pre></div><p>此命令为集群初始化时（kubeadm init）返回结果中的内容。</p>
<h3 id="在master节点输入命令检查集群状态">在master节点输入命令检查集群状态</h3>
<div class="highlight"><pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">kubectl get nodes
</code></pre></div><p>重点查看STATUS内容为Ready时，则说明集群状态正常</p>
<h2 id="5-部署dashboard">5. 部署dashboard</h2>
<h3 id="创建dashboard的yaml文件">创建Dashboard的yaml文件</h3>
<div class="highlight"><pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">wget https://raw.githubusercontent.com/kubernetes/dashboard/v1.10.1/src/deploy/recommended/kubernetes-dashboard.yaml
sed -i <span style="color:#d88200">&#39;s/k8s.gcr.io/loveone/g&#39;</span> kubernetes-dashboard.yaml

sed -i <span style="color:#d88200">&#34;160a \ \ \ \ \ \ nodePort: 30001&#34;</span> kubernetes-dashboard.yaml

sed -i <span style="color:#d88200">&#34;161a \ \ type:\ NodePort&#34;</span> kubernetes-dashboard.yaml
</code></pre></div><h3 id="部署dashboard">部署Dashboard</h3>
<div class="highlight"><pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">kubectl create -f kubernetes-dashboard.yaml
</code></pre></div><h3 id="创建完成后检查相关服务运行状态">创建完成后，检查相关服务运行状态</h3>
<div class="highlight"><pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">kubectl get deployment kubernetes-dashboard -n kube-system

kubectl get pods -n kube-system -o wide

kubectl get services -n kube-system

netstat -ntlp<span style="color:#111">|</span>grep <span style="color:#ae81ff">30001</span>
</code></pre></div><h3 id="查看访问dashboard的认证令牌">查看访问Dashboard的认证令牌</h3>
<div class="highlight"><pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">kubectl describe secrets -n kube-system <span style="color:#00a8c8">$(</span>kubectl -n kube-system get secret <span style="color:#111">|</span> awk <span style="color:#d88200">&#39;/dashboard-admin/{print $1}&#39;</span><span style="color:#00a8c8">)</span>
</code></pre></div><h3 id="使用输出的token登录dashboard">使用输出的token登录Dashboard</h3>
<p>需要创建下管理员角色之类的</p>
<div class="highlight"><pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">vim k8s-admin.yaml


apiVersion: v1
kind: ServiceAccount
metadata:
  name: dashboard-admin
  namespace: kube-system
---
kind: ClusterRoleBinding
apiVersion: rbac.authorization.k8s.io/v1beta1
metadata:
  name: dashboard-admin
subjects:
  - kind: ServiceAccount
    name: dashboard-admin
    namespace: kube-system
roleRef:
  kind: ClusterRole
  name: cluster-admin
  apiGroup: rbac.authorization.k8s.io


</code></pre></div><h4 id="create管理员角色">create管理员角色</h4>
<div class="highlight"><pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">kubectl create -f k8s-admin.yaml
</code></pre></div><h3 id="获取dashboard管理员角色token">获取dashboard管理员角色token</h3>
<h4 id="获取dashboard-secret">获取dashboard secret</h4>
<div class="highlight"><pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">kubectl get secret -n kube-system
</code></pre></div><h4 id="找到刚才创建的角色获取token">找到刚才创建的角色获取token</h4>
<pre><code>kubectl describe secret dashboard-admin-token-jgpsv -n kube-system
</code></pre><h4 id="使用令牌登录">使用令牌登录</h4>
<pre><code>eyJhbGciOiJSUzI1NiIsImtpZCI6IiJ9.eyJpc3MiOiJrdWJlcm5ldGVzL3NlcnZpY2VhY2NvdW50Iiwia3ViZXJuZXRlcy5pby9zZXJ2aWNlYWNjb3VudC9uYW1lc3BhY2UiOiJrdWJlLXN5c3RlbSIsImt1YmVybmV0ZXMuaW8vc2VydmljZWFjY291bnQvc2VjcmV0Lm5hbWUiOiJkYXNoYm9hcmQtYWRtaW4tdG9rZW4tdDlmcTUiLCJrdWJlcm5ldGVzLmlvL3NlcnZpY2VhY2NvdW50L3NlcnZpY2UtYWNjb3VudC5uYW1lIjoiZGFzaGJvYXJkLWFkbWluIiwia3ViZXJuZXRlcy5pby9zZXJ2aWNlYWNjb3VudC9zZXJ2aWNlLWFjY291bnQudWlkIjoiYjA4NTY4ZjQtY2ZkZi0xMWVhLTk5NzUtMDAwYzI5MGJkODc3Iiwic3ViIjoic3lzdGVtOnNlcnZpY2VhY2NvdW50Omt1YmUtc3lzdGVtOmRhc2hib2FyZC1hZG1pbiJ9.GKTkeGsJgRbx0rdor70HVAeJ02bjP3Z3wL9JumaCBy1f1yGXNJxh4RqZLdTvjV11JsSDgDXmvs9I3h5aSDK8FlBwTNI7K2KYVG6683pjlU1nvTnAQa7j6O32SWlHHY3UfnEFE1oa8HFLF-VZCNeHsD9oD-GtBWyh2THQJm78ZfjCNxJuf8Bu_gff1Rc0UcXgWNb70s002XfomRoFkoB5dJkRwxe1pIZy3diTvn7FxmXFA0SAInVUhsNdSqyk9s4Ov1Sa2RFTFNx6m0USujl8po6rEp2Jwsqt6gBIPF04KcNgm5VFMtc1BNw5gxnanBTd1AO3y7tXaDrtMtvh42Azcw
</code></pre><h4 id="解决dashboard在chrome里面无法打开的问题">解决dashboard在chrome里面无法打开的问题</h4>
<div class="highlight"><pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">
mkdir key <span style="color:#f92672">&amp;&amp;</span> <span style="color:#111">cd</span> key
<span style="color:#75715e">#生成证书</span>
openssl genrsa -out dashboard.key <span style="color:#ae81ff">2048</span> 
openssl req -new -out dashboard.csr -key dashboard.key -subj <span style="color:#d88200">&#39;/CN=192.168.246.200&#39;</span>
openssl x509 -req -in dashboard.csr -signkey dashboard.key -out dashboard.crt 
<span style="color:#75715e">#删除原有的证书secret</span>
kubectl delete secret kubernetes-dashboard-certs -n kube-system
<span style="color:#75715e">#创建新的证书secret</span>
kubectl create secret generic kubernetes-dashboard-certs --from-file<span style="color:#f92672">=</span>dashboard.key --from-file<span style="color:#f92672">=</span>dashboard.crt -n kube-system
<span style="color:#75715e">#查看pod</span>
kubectl get pod -n kube-system
<span style="color:#75715e">#重启pod</span>
kubectl delete pod &lt;pod name&gt; -n kube-system
</code></pre></div><hr>



<a href="../" class="btn btn-info">
    Back
</a>



    


                    
                    <div class="row"><div class="position-relative mx-auto col-lg-9">
                          <div class="bg-primary overflow-hidden p-3 mt-5 shadow">

    <h4 class="text-white text-center">Read more</h4>

    <div class="d-flex justify-content-center"><a class="p-1 mr-3 d-inline-block text-white" href="/linux/kubernetes/deploy/golang/" title="Golang of linux "><i class="fas fa-chevron-left p-1"></i>Golang of linux </a>
        <a class="p-1 ml-3 d-inline-block text-white text-right" href="/linux/kubernetes/deploy/natip/" title="NAT网关配置虚拟机静态IP">NAT网关配置虚拟机静态IP<i class="fas fa-chevron-right p-1"></i></a>
    </div>
</div>


                        </div></div> 

                </div>

            </div> 

        </div> 
<script src="https://liuzeng01.github.iolib/jquery.min.js"></script> 
<script src="https://liuzeng01.github.iolib/popper.min.js"></script> 

<script src="https://liuzeng01.github.iojs/bootstrap.min.js"></script> 


<script type="text/javascript" src="/plugins/lunr.min.js"></script>
<script type="text/javascript" src="/plugins/auto-complete.js"></script>
<link href="/plugins/auto-complete.css" rel="stylesheet">
<script type="text/javascript">
  
      var baseurl = "https:\/\/liuzeng01.github.io";
  
</script>
<script type="text/javascript" src="/plugins/search.js"></script>


<script type="text/javascript" src="/plugins/clipboard.js"></script>
<script>
  new ClipboardJS('.btn');
</script>
</body>
</html>
